# Vue的性能优化

## 一、使用函数型组件

在template中标记functional，原因是非函数型组件会在加载时进行生命周期函数的处理，而函数型组件则不会进行生命周期处理，作为一个函数进行处理，这样会大大提高整体页面的效率

![函数型组件1](D:\myLearnHistory\常用工具和框架\vue\Vue性能优化九法\函数型组件1.png)

## 二、拆分子组件

进行性能开销较大的方法需要拆分到子组件中进行运算，因为在Vue生命周期中，Created阶段需要进行属性和方法的运算，在父组件执行beforeMount阶段后，进入子组件的beforeCreate、Created、beforeMount阶段，这些阶段和父组件类似。beforeMount阶段后，执行的是Mounted阶段，该阶段时子组件已经挂载到父组件上，并且父组件随之挂载到页面中。而如果将开销较大的计算写在本组件内，则在Created阶段就非常的耗时，会影响到相关的 render 函数首次被调用的beforeMount阶段的进行。写在子组件内，则可以让父组件在渲染的同时，子组件进行大量运算，提升页面性能。

![子组件拆分1](D:\myLearnHistory\常用工具和框架\vue\Vue性能优化九法\子组件拆分1.png)

## 三、尽量使用局部变量

在需要使用多次计算属性时，可将计算属性声明为函数内部，在每次调用时调用的是内存中的常量，而不是计算属性，可减少性能开销。

![局部变量1](D:\myLearnHistory\常用工具和框架\vue\Vue性能优化九法\局部变量1.png)

## 四、 用v-show替代v-if

众所周知，v-show是不操作DOM树的，只是将元素display:none，而v-if是需要添加元素和删除元素的，需要进行大量的DOM操作；因此，在进行条件渲染那些需要多次显示和隐藏的元素时，尽量使用v-show，可减少页面性能开销，提高加载效率；![v-show替代v-if](D:\myLearnHistory\常用工具和框架\vue\Vue性能优化九法\v-show替代v-if.png)

## 五、使用keep-alive

<keep-alive>能在组件切换过程中将状态保留在内存中，防止重复渲染DOM。在使用<keep-alive> 包裹动态组件时，会缓存不活动的组件实例，而不是销毁它们。

<keep-alive> 与 <transition>相似，只是一个抽象组件，它不会在DOM树中渲染(真实或者虚拟都不会)，也不在父组件链中存在，比如：你永远在 this.$parent 中找不到 keep-alive 。

![使用keepalive](D:\myLearnHistory\常用工具和框架\vue\Vue性能优化九法\使用keepalive.png)

## 六、延迟加载（defer）

使用延迟并不能真正意义上提高运行的效率，而是在view的层面提高了加载速度，让用户在体验上觉得加载速度快了，其实本质上是一样的。可以让那些页面必须的元素或逻辑先执行或先加载出来，在这之后加载那些可以延迟加载的逻辑或元素；

![defer延迟装载](D:\myLearnHistory\常用工具和框架\vue\Vue性能优化九法\defer延迟装载.png)



## 七、分批处理（Time slicing）

在状态管理中，可将一次性传进来就处理的数据进行分批处理，例如：在传入数据同时多传一个分成多少块，每次处理对应所在块中使用到的数据，而不是每次不管所有数据是否用得到，都进行统一的处理；传入100条需要处理的数据，分别在5个页面中用到，每个页面用到不同的20条，可在不同的页面加载时进行处理对应的20条，而不是每次页面加载时都将这100条进行处理；

![分批处理](D:\myLearnHistory\常用工具和框架\vue\Vue性能优化九法\分批处理.png)



## 八、 非响应模式（观察者模式）

在有些时候，我们需要对vue实例中的data进行批量的重新赋值，而vue的观察者模式会检测到data中每个数据的每一次改变，从而进行相应处理，但我们仅仅是想重新赋值，而不需要vue进行处理。这个时候，可在重新赋值时将data解除观察者模式，从而提升性能，减少开销。

![非响应模式（非观察者模式）](D:\myLearnHistory\常用工具和框架\vue\Vue性能优化九法\非响应模式（非观察者模式）.png)



## 九、仅渲染可视化部分

可在页面加载时，优先渲染用户刚进来就能看得到的数据，其余的数据在此之后进行渲染，让用户提高体验度。

![仅渲染可视化部分](D:\myLearnHistory\常用工具和框架\vue\Vue性能优化九法\仅渲染可视化部分.png)

## 十、总结

![总结](D:\myLearnHistory\常用工具和框架\vue\Vue性能优化九法\总结.png)